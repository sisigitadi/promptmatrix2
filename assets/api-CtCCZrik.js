import{G as p}from"./gemini-vendor-CZZ1HbHH.js";const f=async(r,t,l="gemini-pro",c,o)=>{if(!r)throw new Error("API key is missing.");try{const e=new p(r),a={...c},g=e.getGenerativeModel({model:l,generationConfig:a});let s;typeof t=="string"?(s=[{text:t}],o&&s.push({inlineData:o})):s=t;const d=await(await g.generateContent({contents:[{parts:s}]})).response;let i="";for(const n of d.candidates[0].content.parts)n.text?i+=n.text:n.inlineData&&(i+=`![Image](data:${n.inlineData.mimeType};base64,${n.inlineData.data})`);return i}catch(e){console.error("Error calling Gemini API:",e);let a="Terjadi kesalahan yang tidak diketahui saat memanggil Gemini API.";if(e.message&&(a=`Error: ${e.message}`),e.response&&e.response.status)switch(e.response.status){case 400:a="Permintaan tidak valid. Mohon periksa input Anda.";break;case 401:a="API Key tidak valid atau tidak terotorisasi. Mohon periksa API Key Anda.";break;case 429:a="Batas penggunaan API terlampaui. Mohon coba lagi nanti.";break;case 500:a="Kesalahan server internal. Mohon coba lagi nanti.";break;default:a=`Kesalahan API (${e.response.status}): ${e.response.statusText||e.message}`}else e.code==="ECONNABORTED"||e.code==="ETIMEDOUT"?a="Koneksi ke API terputus atau waktu habis. Mohon periksa koneksi internet Anda.":e.name==="GoogleGenerativeAIError"&&(a=`Kesalahan Gemini API: ${e.message}`);return{error:a}}};export{f as c};
