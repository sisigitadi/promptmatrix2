import{r as g,j as e,S as z,ae as M,af as H,ag as D,a6 as S,ah as O,ai as V,aj as Y}from"./vendor-C-0K7go2.js";import{C as W,P as q}from"./index-B2LomfQR.js";import{y as b}from"./toastify-vendor-DMbkEXHT.js";import{M as p,F as s,A as d,R as N,a as r,B as c,I as Q}from"./bootstrap-vendor-dK9NTT7j.js";const X={name:"",label:"",type:"text",description:"",default:"",optional:!1,placeholder:"",info:"",options:[],validation:{}},_={id_kerangka:"",nama_kerangka:"",version:"1.0.0",kategori:["",""],description:"",perspektif_user:"",ai_logic_description:"",components:[],komponen_prompt:{PERAN:"",KONTEKS:"",TUGAS:"",FORMAT_OUTPUT:""},toolType:"text",konteks_tambahan_instruksi_khusus:"",contoh_kalimat:"",output:"natural_language_prompt"},ae=({show:w,onHide:k})=>{const[o,i]=g.useState(_),[T,G]=g.useState([]),[j,y]=g.useState(""),F=()=>{i(_),y(""),k()},m=t=>{const{name:n,value:a}=t.target;i(l=>({...l,[n]:a}))},u=t=>{const{name:n,value:a}=t.target;i(l=>({...l,komponen_prompt:{...l.komponen_prompt,[n]:a}}))},C=(t,n)=>{const a=[...o.kategori||["",""]];if(a[t]=n,t===0){a[1]="";const l=n?Object.keys(q[n]||{}):[];G(l)}i(l=>({...l,kategori:a}))},J=()=>{i(t=>({...t,components:[...t.components||[],{...X,options:[],validation:{}}]}))},K=t=>{i(n=>({...n,components:n.components?.filter((a,l)=>l!==t)}))},h=(t,n)=>{const{name:a,value:l,type:x}=n.target,U=x==="checkbox"?n.target.checked:l,f=JSON.parse(JSON.stringify(o.components||[]));f[t][a]=U,i(I=>({...I,components:f}))},L=t=>{const n=JSON.parse(JSON.stringify(o.components||[]));n[t].options||(n[t].options=[]),n[t].options.push(""),i(a=>({...a,components:n}))},P=(t,n)=>{const a=JSON.parse(JSON.stringify(o.components||[]));a[t].options.splice(n,1),i(l=>({...l,components:a}))},A=(t,n,a)=>{const{value:l}=a.target,x=JSON.parse(JSON.stringify(o.components||[]));x[t].options[n]=l,i(v=>({...v,components:x}))},R=t=>{const n=JSON.parse(JSON.stringify(t));return n.components&&n.components.forEach(a=>{(a.type!=="select"&&a.type!=="multiselect"||a.options&&a.options.length===0)&&delete a.options,a.type!=="number"&&a.type!=="slider"?delete a.validation:a.validation&&(Object.keys(a.validation).forEach(l=>{(a.validation[l]===null||a.validation[l]===""||isNaN(a.validation[l]))&&delete a.validation[l]}),Object.keys(a.validation).length===0&&delete a.validation)}),n},E=()=>{const t=R(o),n=JSON.stringify(t,null,2);y(n),b.success("JSON berhasil dibuat!")},B=()=>{navigator.clipboard.writeText(j).then(()=>{b.info("JSON disalin ke clipboard!")},t=>{b.error("Gagal menyalin JSON."),console.error("Could not copy text: ",t)})};return e.jsxs(p,{show:w,onHide:F,size:"xl",centered:!0,dialogClassName:"modal-themed",scrollable:!0,children:[e.jsx(p.Header,{closeButton:!0,className:"modal-header-themed",children:e.jsxs(p.Title,{className:"d-flex align-items-center gap-2",children:[e.jsx(z,{})," Framework Builder"]})}),e.jsxs(p.Body,{className:"modal-body-themed",children:[e.jsx(s,{children:e.jsxs(d,{defaultActiveKey:"0",alwaysOpen:!0,className:"mb-4",flush:!0,children:[e.jsxs(d.Item,{eventKey:"0",className:"border-bottom border-secondary",children:[e.jsxs(d.Header,{children:[e.jsx(M,{className:"me-2"})," Informasi Dasar"]}),e.jsx(d.Body,{className:"bg-dark-subtle",children:e.jsxs(N,{className:"g-3",children:[e.jsx(r,{md:6,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Nama Kerangka"}),e.jsx(s.Control,{type:"text",name:"nama_kerangka",value:o.nama_kerangka||"",onChange:m,className:"bg-dark text-light border-secondary"})]})}),e.jsx(r,{md:3,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"ID (e.g., TKS-001)"}),e.jsx(s.Control,{type:"text",name:"id_kerangka",value:o.id_kerangka||"",onChange:m,className:"bg-dark text-light border-secondary font-monospace"})]})}),e.jsx(r,{md:3,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Versi"}),e.jsx(s.Control,{type:"text",name:"version",value:o.version||"",onChange:m,className:"bg-dark text-light border-secondary font-monospace"})]})}),e.jsx(r,{md:6,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Kategori Utama"}),e.jsxs(s.Select,{value:o.kategori?.[0]||"",onChange:t=>C(0,t.target.value),className:"bg-dark text-light border-secondary",children:[e.jsx("option",{value:"",children:"Pilih..."}),W.map(t=>e.jsx("option",{value:t,children:t},t))]})]})}),e.jsx(r,{md:6,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Sub-Kategori"}),e.jsxs(s.Select,{value:o.kategori?.[1]||"",onChange:t=>C(1,t.target.value),disabled:!o.kategori?.[0],className:"bg-dark text-light border-secondary",children:[e.jsx("option",{value:"",children:"Pilih..."}),T.map(t=>e.jsx("option",{value:t,children:t},t))]})]})}),e.jsx(r,{md:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Deskripsi Singkat"}),e.jsx(s.Control,{as:"textarea",rows:2,name:"description",value:o.description||"",onChange:m,className:"bg-dark text-light border-secondary"})]})}),e.jsx(r,{md:6,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Perspektif User (User Story)"}),e.jsx(s.Control,{as:"textarea",rows:3,name:"perspektif_user",value:o.perspektif_user||"",onChange:m,className:"bg-dark text-light border-secondary"})]})}),e.jsx(r,{md:6,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Deskripsi Logika AI"}),e.jsx(s.Control,{as:"textarea",rows:3,name:"ai_logic_description",value:o.ai_logic_description||"",onChange:m,className:"bg-dark text-light border-secondary"})]})})]})})]}),e.jsxs(d.Item,{eventKey:"1",className:"border-bottom border-secondary",children:[e.jsxs(d.Header,{children:[e.jsx(H,{className:"me-2"})," Struktur Prompt (System)"]}),e.jsx(d.Body,{className:"bg-dark-subtle",children:e.jsxs(N,{className:"g-3",children:[e.jsx(r,{md:6,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Peran (Role)"}),e.jsx(s.Control,{as:"textarea",rows:3,name:"PERAN",value:o.komponen_prompt?.PERAN||"",onChange:u,className:"bg-dark text-light border-secondary",placeholder:"e.g., Anda adalah ahli..."})]})}),e.jsx(r,{md:6,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Konteks (Context)"}),e.jsx(s.Control,{as:"textarea",rows:3,name:"KONTEKS",value:o.komponen_prompt?.KONTEKS||"",onChange:u,className:"bg-dark text-light border-secondary"})]})}),e.jsx(r,{md:6,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Tugas (Task)"}),e.jsx(s.Control,{as:"textarea",rows:3,name:"TUGAS",value:o.komponen_prompt?.TUGAS||"",onChange:u,className:"bg-dark text-light border-secondary"})]})}),e.jsx(r,{md:6,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Format Output"}),e.jsx(s.Control,{as:"textarea",rows:3,name:"FORMAT_OUTPUT",value:o.komponen_prompt?.FORMAT_OUTPUT||"",onChange:u,className:"bg-dark text-light border-secondary"})]})})]})})]}),e.jsxs(d.Item,{eventKey:"2",children:[e.jsxs(d.Header,{children:[e.jsx(D,{className:"me-2"})," Komponen Input (Formulir)"]}),e.jsx(d.Body,{className:"bg-dark-subtle",children:e.jsxs("div",{className:"d-flex flex-column gap-3",children:[o.components?.map((t,n)=>e.jsxs("div",{className:"border border-secondary rounded p-3 bg-dark",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("h6",{className:"mb-0 text-info",children:["Komponen #",n+1]}),e.jsx(c,{variant:"outline-danger",size:"sm",onClick:()=>K(n),title:"Hapus Komponen",children:e.jsx(S,{})})]}),e.jsxs(N,{className:"g-3",children:[e.jsx(r,{md:4,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Tipe Input"}),e.jsxs(s.Select,{name:"type",value:t.type,onChange:a=>h(n,a),className:"bg-secondary text-light border-0",size:"sm",children:[e.jsx("option",{value:"text",children:"Text (Singkat)"}),e.jsx("option",{value:"textarea",children:"Textarea (Panjang)"}),e.jsx("option",{value:"number",children:"Number (Angka)"}),e.jsx("option",{value:"select",children:"Select (Dropdown)"}),e.jsx("option",{value:"multiselect",children:"Multi-select"}),e.jsx("option",{value:"boolean",children:"Boolean (Switch)"}),e.jsx("option",{value:"slider",children:"Slider (Geser)"}),e.jsx("option",{value:"code",children:"Code (Editor)"})]})]})}),e.jsx(r,{md:4,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Variable Name"}),e.jsx(s.Control,{type:"text",name:"name",value:t.name,onChange:a=>h(n,a),size:"sm",className:"bg-dark text-light border-secondary font-monospace",placeholder:"MY_VARIABLE"})]})}),e.jsx(r,{md:4,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Label Tampilan"}),e.jsx(s.Control,{type:"text",name:"label",value:t.label,onChange:a=>h(n,a),size:"sm",className:"bg-dark text-light border-secondary"})]})}),e.jsx(r,{md:12,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Tooltip Info"}),e.jsx(s.Control,{type:"text",name:"info",value:t.info,onChange:a=>h(n,a),size:"sm",className:"bg-dark text-light border-secondary",placeholder:"Penjelasan singkat saat user hover icon info..."})]})}),e.jsx(r,{md:6,children:e.jsxs(s.Group,{children:[e.jsx(s.Label,{className:"small text-muted mb-1",children:"Placeholder"}),e.jsx(s.Control,{type:"text",name:"placeholder",value:t.placeholder,onChange:a=>h(n,a),size:"sm",className:"bg-dark text-light border-secondary"})]})}),e.jsx(r,{md:6,className:"d-flex align-items-end",children:e.jsx(s.Check,{type:"switch",name:"optional",label:"Input ini opsional",checked:t.optional,onChange:a=>h(n,a),className:""})}),(t.type==="select"||t.type==="multiselect")&&e.jsx(r,{md:12,children:e.jsxs("div",{className:"p-2 border border-secondary rounded bg-dark-subtle",children:[e.jsx("label",{className:"small text-muted mb-2 d-block",children:"Opsi Pilihan:"}),t.options?.map((a,l)=>e.jsxs(Q,{className:"mb-2",size:"sm",children:[e.jsx(s.Control,{type:"text",value:typeof a=="string"?a:a.value,onChange:x=>A(n,l,x),className:"bg-dark text-light border-secondary"}),e.jsx(c,{variant:"outline-danger",onClick:()=>P(n,l),children:e.jsx(S,{})})]},l)),e.jsxs(c,{variant:"outline-info",size:"sm",onClick:()=>L(n),className:"w-100",children:[e.jsx(O,{className:"me-1"})," Tambah Opsi"]})]})})]})]},n)),e.jsxs(c,{variant:"success",onClick:J,className:"py-2",children:[e.jsx(O,{className:"me-2"})," Tambah Komponen Baru"]})]})})]})]})}),j&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("h5",{className:"mb-0 text-info",children:[e.jsx(V,{className:"me-2"})," JSON Result"]}),e.jsxs(c,{variant:"outline-light",size:"sm",onClick:B,children:[e.jsx(Y,{className:"me-1"})," Salin JSON"]})]}),e.jsx("div",{className:"position-relative",children:e.jsx("pre",{className:"bg-dark p-3 rounded border border-secondary text-info mb-0",style:{maxHeight:"300px",overflowY:"auto"},children:e.jsx("code",{children:j})})})]})]}),e.jsxs(p.Footer,{className:"modal-footer-themed justify-content-between",children:[e.jsx(c,{variant:"outline-secondary",onClick:k,children:"Batal"}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(c,{variant:"primary",onClick:E,disabled:!o.nama_kerangka,children:"Generate Framework JSON"})})]})]})};export{ae as default};
