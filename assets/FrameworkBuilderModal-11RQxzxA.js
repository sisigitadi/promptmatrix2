import{r as b,j as e,S as z,ae as M,af as H,ag as D,a6 as S,ah as O,ai as V,aj as Y}from"./vendor-CSLY-SmC.js";import{C as W,P as q}from"./index-B0xI_gQi.js";import{y as g}from"./toastify-vendor-Ddy96bbr.js";import{M as p,F as a,A as d,R as k,a as o,B as c,I as Q}from"./bootstrap-vendor-BDZr_8wO.js";const X={name:"",label:"",type:"text",description:"",default:"",optional:!1,placeholder:"",info:"",options:[],validation:{}},_={id_kerangka:"",nama_kerangka:"",version:"1.0.0",kategori:["",""],description:"",perspektif_user:"",ai_logic_description:"",components:[],komponen_prompt:{PERAN:"",KONTEKS:"",TUGAS:"",FORMAT_OUTPUT:""},toolType:"text",konteks_tambahan_instruksi_khusus:"",contoh_kalimat:"",output:"natural_language_prompt"},se=({show:T,onHide:N})=>{const[r,i]=b.useState(_),[w,G]=b.useState([]),[j,y]=b.useState(""),F=()=>{i(_),y(""),N()},m=t=>{const{name:n,value:s}=t.target;i(l=>({...l,[n]:s}))},u=t=>{const{name:n,value:s}=t.target;i(l=>({...l,komponen_prompt:{...l.komponen_prompt,[n]:s}}))},C=(t,n)=>{const s=[...r.kategori||["",""]];if(s[t]=n,t===0){s[1]="";const l=n?Object.keys(q[n]||{}):[];G(l)}i(l=>({...l,kategori:s}))},J=()=>{i(t=>({...t,components:[...t.components||[],{...X,options:[],validation:{}}]}))},K=t=>{i(n=>({...n,components:n.components?.filter((s,l)=>l!==t)}))},h=(t,n)=>{const{name:s,value:l,type:x}=n.target,U=x==="checkbox"?n.target.checked:l,f=JSON.parse(JSON.stringify(r.components||[]));f[t][s]=U,i(I=>({...I,components:f}))},L=t=>{const n=JSON.parse(JSON.stringify(r.components||[]));n[t].options||(n[t].options=[]),n[t].options.push(""),i(s=>({...s,components:n}))},P=(t,n)=>{const s=JSON.parse(JSON.stringify(r.components||[]));s[t].options.splice(n,1),i(l=>({...l,components:s}))},A=(t,n,s)=>{const{value:l}=s.target,x=JSON.parse(JSON.stringify(r.components||[]));x[t].options[n]=l,i(v=>({...v,components:x}))},R=t=>{const n=JSON.parse(JSON.stringify(t));return n.components&&n.components.forEach(s=>{(s.type!=="select"&&s.type!=="multiselect"||s.options&&s.options.length===0)&&delete s.options,s.type!=="number"&&s.type!=="slider"?delete s.validation:s.validation&&(Object.keys(s.validation).forEach(l=>{(s.validation[l]===null||s.validation[l]===""||isNaN(s.validation[l]))&&delete s.validation[l]}),Object.keys(s.validation).length===0&&delete s.validation)}),n},E=()=>{const t=R(r),n=JSON.stringify(t,null,2);y(n),g.success("JSON berhasil dibuat!")},B=()=>{navigator.clipboard.writeText(j).then(()=>{g.info("JSON disalin ke clipboard!")},t=>{g.error("Gagal menyalin JSON."),console.error("Could not copy text: ",t)})};return e.jsxs(p,{show:T,onHide:F,size:"xl",centered:!0,dialogClassName:"modal-themed",scrollable:!0,children:[e.jsx(p.Header,{closeButton:!0,className:"modal-header-themed",children:e.jsxs(p.Title,{className:"d-flex align-items-center gap-2",children:[e.jsx(z,{})," Framework Builder"]})}),e.jsxs(p.Body,{className:"modal-body-themed",children:[e.jsx(a,{children:e.jsxs(d,{defaultActiveKey:"0",alwaysOpen:!0,className:"mb-4",flush:!0,children:[e.jsxs(d.Item,{eventKey:"0",className:"border-bottom border-secondary",children:[e.jsxs(d.Header,{children:[e.jsx(M,{className:"me-2"})," Informasi Dasar"]}),e.jsx(d.Body,{className:"bg-dark-subtle",children:e.jsxs(k,{className:"g-3",children:[e.jsx(o,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Nama Kerangka"}),e.jsx(a.Control,{type:"text",name:"nama_kerangka",value:r.nama_kerangka||"",onChange:m,className:"bg-dark text-light border-secondary"})]})}),e.jsx(o,{md:3,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"ID (e.g., TKS-001)"}),e.jsx(a.Control,{type:"text",name:"id_kerangka",value:r.id_kerangka||"",onChange:m,className:"bg-dark text-light border-secondary font-monospace"})]})}),e.jsx(o,{md:3,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Versi"}),e.jsx(a.Control,{type:"text",name:"version",value:r.version||"",onChange:m,className:"bg-dark text-light border-secondary font-monospace"})]})}),e.jsx(o,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Kategori Utama"}),e.jsxs(a.Select,{value:r.kategori?.[0]||"",onChange:t=>C(0,t.target.value),className:"bg-dark text-light border-secondary",children:[e.jsx("option",{value:"",children:"Pilih..."}),W.map(t=>e.jsx("option",{value:t,children:t},t))]})]})}),e.jsx(o,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Sub-Kategori"}),e.jsxs(a.Select,{value:r.kategori?.[1]||"",onChange:t=>C(1,t.target.value),disabled:!r.kategori?.[0],className:"bg-dark text-light border-secondary",children:[e.jsx("option",{value:"",children:"Pilih..."}),w.map(t=>e.jsx("option",{value:t,children:t},t))]})]})}),e.jsx(o,{md:12,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Deskripsi Singkat"}),e.jsx(a.Control,{as:"textarea",rows:2,name:"description",value:r.description||"",onChange:m,className:"bg-dark text-light border-secondary"})]})}),e.jsx(o,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Perspektif User (User Story)"}),e.jsx(a.Control,{as:"textarea",rows:3,name:"perspektif_user",value:r.perspektif_user||"",onChange:m,className:"bg-dark text-light border-secondary"})]})}),e.jsx(o,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Deskripsi Logika AI"}),e.jsx(a.Control,{as:"textarea",rows:3,name:"ai_logic_description",value:r.ai_logic_description||"",onChange:m,className:"bg-dark text-light border-secondary"})]})})]})})]}),e.jsxs(d.Item,{eventKey:"1",className:"border-bottom border-secondary",children:[e.jsxs(d.Header,{children:[e.jsx(H,{className:"me-2"})," Struktur Prompt (System)"]}),e.jsx(d.Body,{className:"bg-dark-subtle",children:e.jsxs(k,{className:"g-3",children:[e.jsx(o,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Peran (Role)"}),e.jsx(a.Control,{as:"textarea",rows:3,name:"PERAN",value:r.komponen_prompt?.PERAN||"",onChange:u,className:"bg-dark text-light border-secondary",placeholder:"e.g., Anda adalah ahli..."})]})}),e.jsx(o,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Konteks (Context)"}),e.jsx(a.Control,{as:"textarea",rows:3,name:"KONTEKS",value:r.komponen_prompt?.KONTEKS||"",onChange:u,className:"bg-dark text-light border-secondary"})]})}),e.jsx(o,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Tugas (Task)"}),e.jsx(a.Control,{as:"textarea",rows:3,name:"TUGAS",value:r.komponen_prompt?.TUGAS||"",onChange:u,className:"bg-dark text-light border-secondary"})]})}),e.jsx(o,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Format Output"}),e.jsx(a.Control,{as:"textarea",rows:3,name:"FORMAT_OUTPUT",value:r.komponen_prompt?.FORMAT_OUTPUT||"",onChange:u,className:"bg-dark text-light border-secondary"})]})})]})})]}),e.jsxs(d.Item,{eventKey:"2",children:[e.jsxs(d.Header,{children:[e.jsx(D,{className:"me-2"})," Komponen Input (Formulir)"]}),e.jsx(d.Body,{className:"bg-dark-subtle",children:e.jsxs("div",{className:"d-flex flex-column gap-3",children:[r.components?.map((t,n)=>e.jsxs("div",{className:"border border-secondary rounded p-3 bg-dark",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("h6",{className:"mb-0 text-info",children:["Komponen #",n+1]}),e.jsx(c,{variant:"outline-danger",size:"sm",onClick:()=>K(n),title:"Hapus Komponen",children:e.jsx(S,{})})]}),e.jsxs(k,{className:"g-3",children:[e.jsx(o,{md:4,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Tipe Input"}),e.jsxs(a.Select,{name:"type",value:t.type,onChange:s=>h(n,s),className:"bg-secondary text-light border-0",size:"sm",children:[e.jsx("option",{value:"text",children:"Text (Singkat)"}),e.jsx("option",{value:"textarea",children:"Textarea (Panjang)"}),e.jsx("option",{value:"number",children:"Number (Angka)"}),e.jsx("option",{value:"select",children:"Select (Dropdown)"}),e.jsx("option",{value:"multiselect",children:"Multi-select"}),e.jsx("option",{value:"boolean",children:"Boolean (Switch)"}),e.jsx("option",{value:"slider",children:"Slider (Geser)"}),e.jsx("option",{value:"code",children:"Code (Editor)"})]})]})}),e.jsx(o,{md:4,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Variable Name"}),e.jsx(a.Control,{type:"text",name:"name",value:t.name,onChange:s=>h(n,s),size:"sm",className:"bg-dark text-light border-secondary font-monospace",placeholder:"MY_VARIABLE"})]})}),e.jsx(o,{md:4,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Label Tampilan"}),e.jsx(a.Control,{type:"text",name:"label",value:t.label,onChange:s=>h(n,s),size:"sm",className:"bg-dark text-light border-secondary"})]})}),e.jsx(o,{md:12,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Tooltip Info"}),e.jsx(a.Control,{type:"text",name:"info",value:t.info,onChange:s=>h(n,s),size:"sm",className:"bg-dark text-light border-secondary",placeholder:"Penjelasan singkat saat user hover icon info..."})]})}),e.jsx(o,{md:6,children:e.jsxs(a.Group,{children:[e.jsx(a.Label,{className:"small text-muted mb-1",children:"Placeholder"}),e.jsx(a.Control,{type:"text",name:"placeholder",value:t.placeholder,onChange:s=>h(n,s),size:"sm",className:"bg-dark text-light border-secondary"})]})}),e.jsx(o,{md:6,className:"d-flex align-items-end",children:e.jsx(a.Check,{type:"switch",name:"optional",label:"Input ini opsional",checked:t.optional,onChange:s=>h(n,s),className:""})}),(t.type==="select"||t.type==="multiselect")&&e.jsx(o,{md:12,children:e.jsxs("div",{className:"p-2 border border-secondary rounded bg-dark-subtle",children:[e.jsx("label",{className:"small text-muted mb-2 d-block",children:"Opsi Pilihan:"}),t.options?.map((s,l)=>e.jsxs(Q,{className:"mb-2",size:"sm",children:[e.jsx(a.Control,{type:"text",value:typeof s=="string"?s:s.value,onChange:x=>A(n,l,x),className:"bg-dark text-light border-secondary"}),e.jsx(c,{variant:"outline-danger",onClick:()=>P(n,l),title:"Hapus opsi pilihan ini",children:e.jsx(S,{})})]},l)),e.jsxs(c,{variant:"outline-info",size:"sm",onClick:()=>L(n),className:"w-100",title:"Tambah opsi pilihan baru untuk dropdown",children:[e.jsx(O,{className:"me-1"})," Tambah Opsi"]})]})})]})]},n)),e.jsxs(c,{variant:"success",onClick:J,className:"py-2",title:"Tambahkan komponen input baru ke dalam kerangka kerja",children:[e.jsx(O,{className:"me-2"})," Tambah Komponen Baru"]})]})})]})]})}),j&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[e.jsxs("h5",{className:"mb-0 text-info",children:[e.jsx(V,{className:"me-2"})," JSON Result"]}),e.jsxs(c,{variant:"outline-light",size:"sm",onClick:B,title:"Salin kode JSON kerangka kerja ke clipboard",children:[e.jsx(Y,{className:"me-1"})," Salin JSON"]})]}),e.jsx("div",{className:"position-relative",children:e.jsx("pre",{className:"bg-dark p-3 rounded border border-secondary text-info mb-0",style:{maxHeight:"300px",overflowY:"auto"},children:e.jsx("code",{children:j})})})]})]}),e.jsxs(p.Footer,{className:"modal-footer-themed justify-content-between",children:[e.jsx(c,{variant:"outline-secondary",onClick:N,children:"Batal"}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(c,{variant:"primary",onClick:E,disabled:!r.nama_kerangka,title:"Generate struktur JSON lengkap berdasarkan data yang diinput",children:"Generate Framework JSON"})})]})]})};export{se as default};
