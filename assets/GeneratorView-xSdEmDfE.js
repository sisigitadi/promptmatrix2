const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/NavigationPane-D_4Fyuq_.js","assets/vendor-CpGgheO9.js","assets/index-DcY1txVD.js","assets/bootstrap-vendor-DaD4giyc.js","assets/bootstrap-vendor-DBkz-poX.css","assets/toastify-vendor-BS7qYPjn.js","assets/toastify-vendor-VYesxZYF.css","assets/index-Cab_UyHS.css","assets/categoryUtils-DgX9EYe_.js","assets/FrameworkPane-cOQ1pWFr.js","assets/api-CtCCZrik.js","assets/gemini-vendor-CZZ1HbHH.js","assets/OutputDisplay-Cu7UxevT.js","assets/promptGenerators-KF_6FwiQ.js","assets/OnboardingTour-CbNhIEKp.js"])))=>i.map(i=>d[i]);
import{r as a,j as F,a as z,_ as N}from"./vendor-CpGgheO9.js";import{g as ke,a as ye,b as Se,c as _e,d as be}from"./promptGenerators-KF_6FwiQ.js";import{P as J}from"./index-DcY1txVD.js";import{R as we,a as K}from"./bootstrap-vendor-DaD4giyc.js";import"./toastify-vendor-BS7qYPjn.js";const ee=(k,n,i)=>{const t=i.validation,_=n===""||n===null||typeof n=="string"&&n.trim()==="";if(i.optional&&_)return"";if(!i.optional&&_)return t&&typeof n=="string"&&t.min_length&&t.min_length>0?`Bidang '${i.label||i.name||k}' membutuhkan minimal ${t.min_length} karakter.`:`Bidang '${i.label||i.name||k}' tidak boleh kosong.`;if(t){if(t.min_length&&typeof n=="string"&&n.length<t.min_length)return`Input ini membutuhkan minimal ${t.min_length} karakter.`;if(t.max_length&&typeof n=="string"&&n.length>t.max_length)return`Bidang '${i.label||i.name||k}' tidak boleh lebih dari ${t.max_length} karakter.`;if(t.regex&&typeof n=="string"&&!new RegExp(t.regex).test(n))return"Format input tidak valid. Mohon periksa kembali.";if(t.min_value&&typeof n=="number"&&n<t.min_value)return`Nilai minimal yang diizinkan adalah ${t.min_value}.`;if(t.max_value&&typeof n=="number"&&n>t.max_value)return`Nilai maksimal yang diizinkan adalah ${t.max_value}.`;if(t.min_date&&new Date(n)<new Date(t.min_date))return`Tanggal untuk bidang '${i.label||i.name||k}' tidak boleh sebelum ${t.min_date}.`;if(t.max_date&&new Date(n)>new Date(t.max_date))return`Tanggal untuk bidang '${i.label||i.name||k}' tidak boleh setelah ${t.max_date}.`}return""};function Oe(k){const[n,i]=a.useState(null),[t,_]=a.useState(null),[I,L]=a.useState({}),[Q,P]=a.useState({}),[h,x]=a.useState(""),[E,C]=a.useState(""),[y,v]=a.useState(""),[D,j]=a.useState(!1);a.useEffect(()=>{const e=setTimeout(()=>{C(h)},300);return()=>clearTimeout(e)},[h]);const R=a.useMemo(()=>{const e=[];return Object.entries(J).forEach(([o,l])=>{l&&Object.entries(l).forEach(([s,r])=>{r&&Object.entries(r).forEach(([d,g])=>{e.push({...g,category:o,subcategory:s,name:d})})})}),e},[]),T=a.useCallback(e=>{const o=R.find(l=>l.name===e);if(o){const{category:l,subcategory:s,...r}=o;return{framework:r,category:l,subcategory:s}}return null},[R]),$=a.useCallback(e=>{i(e),_(null),x(""),C(""),v(""),L({}),P({})},[]),V=a.useCallback((e,o,l)=>{let s=null;if(o&&l?s={framework:J[o][l][e],category:o,subcategory:l}:s=T(e),!s)return;i(s.category),_(e),x(""),C(""),v(""),P({[s.subcategory]:!0});const r={},d=s.framework.components?.map(g=>[g.name,g])||[];for(const[g,w]of d){const f=w;if(f.type==="select"&&f.options?.length){const b=f.options[0];typeof b=="string"&&(b.startsWith("Pilih")||b.startsWith("Select"))?r[g]=f.options[1]||"":r[g]=b}else r[g]=f.default??""}k({type:"SET_FORM_DATA",payload:{formData:r}})},[k,T]);a.useEffect(()=>{const e=new URLSearchParams(window.location.search),o=e.get("category"),l=e.get("framework");l?V(l):o&&$(o)},[]),a.useEffect(()=>{const e=new URLSearchParams;t?e.set("framework",t):n&&e.set("category",n);const o=e.toString(),l=o?`${window.location.pathname}?${o}`:window.location.pathname;window.location.search!==(o?`?${o}`:"")&&history.pushState({},"",l)},[n,t]);const A=a.useMemo(()=>{j(!0);const e={},o=E.toLowerCase(),l=E||y;return!n&&!l?(j(!1),{}):(n&&!l?J[n]&&(e[n]=JSON.parse(JSON.stringify(J[n]))):(R.forEach(s=>{const r=s.category,d=s.subcategory,g=s.name,w=!n||r===n,f=g.toLowerCase().includes(o)||s.id_kerangka&&s.id_kerangka.toLowerCase().includes(o)||s.nama_kerangka&&s.nama_kerangka.toLowerCase().includes(o)||s.description.toLowerCase().includes(o),b=!y||s.toolType===y;w&&f&&b&&(e[r]||(e[r]={}),e[r][d]||(e[r][d]={}),e[r][d][g]=s)}),Object.keys(e).forEach(s=>{e[s]&&(Object.keys(e[s]).forEach(r=>{Object.keys(e[s][r]).length===0&&delete e[s][r]}),Object.keys(e[s]).length===0&&delete e[s])})),j(!1),e)},[E,y,n,R]);a.useEffect(()=>{const e={};(E||y)&&Object.values(A).forEach(l=>{Object.keys(l).forEach(s=>{e[s]=!0})}),L(e)},[A,E,y,n]);const U=e=>{const o=e.target.value;x(o),i(null),P({})},W=e=>{v(e.target.value),x(""),C(""),i(null),P({})},S=e=>{P(o=>({...o,[e]:!o[e]}))},q=()=>{i(null),_(null),x(""),C(""),v("")},B=a.useMemo(()=>t?T(t):null,[t,T]);return{selectedCategory:n,setSelectedCategory:i,selectedFramework:t,setSelectedFramework:_,openSubcategories:I,manualOpenSubcategories:Q,searchQuery:h,debouncedSearchQuery:E,toolTypeFilter:y,handleToolTypeFilterChange:W,filteredFrameworks:A,currentFrameworkDetails:B,handleCategorySelect:$,handleFrameworkSelect:V,handleSearchChange:U,handleSubcategoryToggle:S,handleBackToCategories:q,findFrameworkInAllCategories:T,isLoading:D}}const xe=z.lazy(()=>N(()=>import("./NavigationPane-D_4Fyuq_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Ee=z.lazy(()=>N(()=>import("./FrameworkPane-cOQ1pWFr.js"),__vite__mapDeps([9,1,3,4,10,11,5,6]))),Fe=z.lazy(()=>N(()=>import("./OutputDisplay-Cu7UxevT.js"),__vite__mapDeps([12,1,10,11,3,4,5,6,13,2,7]))),Pe=z.lazy(()=>N(()=>import("./OnboardingTour-CbNhIEKp.js"),__vite__mapDeps([14,1,3,4]))),Re=({showDevMode:k,isApiKeyEnabled:n,apiKey:i,setApiKey:t,showOnboardingTour:_,setShowOnboardingTour:I,handleSavePrompt:L,handleUseAsInput:Q,onShowSavedPrompts:P,promptToLoad:h,onLoadComplete:x,onNavigate:E})=>{const C=c=>{switch(c.type){case"SET_FORM_DATA":d(c.payload.formData),w({});break;case"RESET_FORM":d({}),w({});break}},{selectedCategory:y,setSelectedCategory:v,selectedFramework:D,setSelectedFramework:j,openSubcategories:R,searchQuery:T,debouncedSearchQuery:$,toolTypeFilter:V,handleToolTypeFilterChange:A,filteredFrameworks:U,manualOpenSubcategories:W,currentFrameworkDetails:S,handleCategorySelect:q,handleFrameworkSelect:B,handleSearchChange:e,handleSubcategoryToggle:o,handleBackToCategories:l,isLoading:s}=Oe(C),[r,d]=a.useState({}),[g,w]=a.useState({}),[f,b]=a.useState([{id:`block-${Date.now()}`,type:"text",content:""}]),[te,ne]=a.useState(()=>sessionStorage.getItem("selectedModel")||"gemini-3.0-flash"),[ae,M]=a.useState({}),[ce,se]=a.useState({}),[ue,G]=a.useState([]),[ge,oe]=a.useState(""),[me,H]=a.useState(""),[de,X]=a.useState("");a.useEffect(()=>{h&&(v(h.parentPrompt.category),j(h.parentPrompt.frameworkName),d(h.versionData.formData||{}),w(h.versionData.customInputs||{}),Array.isArray(h.versionData.naturalLanguageOutput)?b(h.versionData.naturalLanguageOutput):b([{id:`block-${Date.now()}`,type:"text",content:""}]),x())},[h,x,v,j]);const re=a.useCallback((c,m,p)=>{d(O=>{const u={...O,[c]:m},Y=ee(c,m,p);return M(Z=>({...Z,[c]:Y})),u})},[d,M]),fe=a.useCallback((c,m,p)=>{w(u=>({...u,[c]:m}));const O=ee(c,m,p);M(u=>({...u,[`${c}-custom`]:O}))},[w,M]),he=a.useCallback(c=>{se(m=>({...m,[c]:!0}))},[se]),ie=a.useCallback(c=>{ne(c)},[ne]),pe=(c,m)=>{const p={};if(!m)return p;const O={...m.components?Object.fromEntries(m.components.map(u=>[u.name,u])):{}};for(const u in O){const Y=O[u],Z=c[u],le=ee(u,Z,Y);le&&(p[u]=le)}return m.crossValidationRules&&m.crossValidationRules.forEach(u=>{c[u.triggerField]===u.triggerValue&&!c[u.dependentField]&&(p[u.dependentField]=u.errorMessage)}),p};return a.useEffect(()=>{if(S&&D){if(S.framework.builder==="visual"){const m=ke(f);H(m);const p=ye(f);G(p),X(JSON.stringify(f,null,2))}else{const m=Se(S.framework,r,g);H(m);const p=_e(S.framework,r,g);G(p);const O=be(S.framework,D,r,g);oe(O),X(O)}const c=pe(r,S.framework);M(c)}else G([]),oe(""),H(""),X(""),M({})},[S,D,r,g,f]),F.jsxs(we,{className:"flex-grow-1 g-4 align-items-stretch",children:[F.jsx(K,{xs:12,xl:4,className:"navigation-pane h-100",id:"navigation-pane",children:F.jsx(xe,{selectedCategory:y,searchQuery:T,debouncedSearchQuery:$,filteredFrameworks:U,openSubcategories:R,manualOpenSubcategories:W,handleCategorySelect:q,handleBackToCategories:l,handleFrameworkSelect:B,handleSearchChange:e,handleSubcategoryToggle:o,toolTypeFilter:V,handleToolTypeFilterChange:A,isLoading:s,showInitialMessage:!y&&!$&&!V,showOnboardingTour:_,completeOnboardingTour:()=>I(!1),onNavigate:E})}),F.jsx(K,{xs:12,xl:4,className:"d-flex flex-column h-100",children:F.jsx(Ee,{currentFrameworkDetails:S,selectedFramework:D,formData:r,customInputs:g,promptBlocks:f,onPromptBlocksChange:b,onModelSelect:ie,selectedModel:te,showDevMode:k,isApiKeyEnabled:n,apiKey:i,setApiKey:t,handleInputChangeWithValidation:re,handleCustomInputChangeWithValidation:fe,validationErrors:ae,touchedFields:ce,handleInputBlur:he})}),F.jsx(K,{xs:12,xl:4,className:"d-flex flex-column h-100",children:F.jsx(Fe,{naturalLanguageOutput:ue,jsonOutput:ge,previewNaturalLanguageOutput:me,previewJsonOutput:de,currentFrameworkDetails:S,formData:r,customInputs:g,selectedFramework:D,selectedCategory:y,onUseAsInput:Q,onShowSavedPrompts:P,showDevMode:k,onSavePrompt:L,apiKey:i,setApiKey:t,selectedModel:te,onModelSelect:ie,handleInputChangeWithValidation:re,validationErrors:ae,isApiKeyEnabled:n,onSelectRecommendedFramework:B})}),F.jsx(Pe,{show:_,onHide:()=>I(!1),onComplete:()=>I(!1)})]})};export{Re as default};
