const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/NavigationPane-DPEO6fiN.js","assets/vendor-CpGgheO9.js","assets/index-Dh5SxBWa.js","assets/bootstrap-vendor-DaD4giyc.js","assets/bootstrap-vendor-DBkz-poX.css","assets/toastify-vendor-BS7qYPjn.js","assets/toastify-vendor-VYesxZYF.css","assets/index-BBqAjwG2.css","assets/categoryUtils-DgX9EYe_.js","assets/FrameworkPane-cOQ1pWFr.js","assets/api-CtCCZrik.js","assets/gemini-vendor-CZZ1HbHH.js","assets/OutputDisplay-ThmAcuYB.js","assets/promptGenerators-KF_6FwiQ.js","assets/OnboardingTour-CbNhIEKp.js"])))=>i.map(i=>d[i]);
import{r as n,j as E,a as z,_ as N}from"./vendor-CpGgheO9.js";import{g as ke,a as ye,b as Se,c as _e,d as be}from"./promptGenerators-KF_6FwiQ.js";import{P as J}from"./index-Dh5SxBWa.js";import{R as we,a as K}from"./bootstrap-vendor-DaD4giyc.js";import"./toastify-vendor-BS7qYPjn.js";const ee=(h,a,l)=>{const t=l.validation,S=a===""||a===null||typeof a=="string"&&a.trim()==="";if(l.optional&&S)return"";if(!l.optional&&S)return t&&typeof a=="string"&&t.min_length&&t.min_length>0?`Bidang '${l.label||l.name||h}' membutuhkan minimal ${t.min_length} karakter.`:`Bidang '${l.label||l.name||h}' tidak boleh kosong.`;if(t){if(t.min_length&&typeof a=="string"&&a.length<t.min_length)return`Input ini membutuhkan minimal ${t.min_length} karakter.`;if(t.max_length&&typeof a=="string"&&a.length>t.max_length)return`Bidang '${l.label||l.name||h}' tidak boleh lebih dari ${t.max_length} karakter.`;if(t.regex&&typeof a=="string"&&!new RegExp(t.regex).test(a))return"Format input tidak valid. Mohon periksa kembali.";if(t.min_value&&typeof a=="number"&&a<t.min_value)return`Nilai minimal yang diizinkan adalah ${t.min_value}.`;if(t.max_value&&typeof a=="number"&&a>t.max_value)return`Nilai maksimal yang diizinkan adalah ${t.max_value}.`;if(t.min_date&&new Date(a)<new Date(t.min_date))return`Tanggal untuk bidang '${l.label||l.name||h}' tidak boleh sebelum ${t.min_date}.`;if(t.max_date&&new Date(a)>new Date(t.max_date))return`Tanggal untuk bidang '${l.label||l.name||h}' tidak boleh setelah ${t.max_date}.`}return""};function Oe(h){const[a,l]=n.useState(null),[t,S]=n.useState(null),[L,A]=n.useState({}),[Q,F]=n.useState({}),[P,O]=n.useState(""),[x,C]=n.useState(""),[k,T]=n.useState(""),[j,v]=n.useState(!1);n.useEffect(()=>{const e=setTimeout(()=>{C(P)},300);return()=>clearTimeout(e)},[P]);const D=n.useMemo(()=>{const e=[];return Object.entries(J).forEach(([o,c])=>{c&&Object.entries(c).forEach(([s,r])=>{r&&Object.entries(r).forEach(([d,m])=>{e.push({...m,category:o,subcategory:s,name:d})})})}),e},[]),R=n.useCallback(e=>{const o=D.find(c=>c.name===e);if(o){const{category:c,subcategory:s,...r}=o;return{framework:r,category:c,subcategory:s}}return null},[D]),I=n.useCallback(e=>{l(e),S(null),O(""),C(""),T(""),A({}),F({})},[]),$=n.useCallback((e,o,c)=>{let s=null;if(o&&c?s={framework:J[o][c][e],category:o,subcategory:c}:s=R(e),!s)return;l(s.category),S(e),O(""),C(""),T(""),F({[s.subcategory]:!0});const r={},d=s.framework.components?.map(m=>[m.name,m])||[];for(const[m,b]of d){const f=b;if(f.type==="select"&&f.options?.length){const _=f.options[0];typeof _=="string"&&(_.startsWith("Pilih")||_.startsWith("Select"))?r[m]=f.options[1]||"":r[m]=_}else r[m]=f.default??""}h({type:"SET_FORM_DATA",payload:{formData:r}})},[h,R]);n.useEffect(()=>{const e=new URLSearchParams(window.location.search),o=e.get("category"),c=e.get("framework");c?$(c):o&&I(o)},[]),n.useEffect(()=>{const e=new URLSearchParams;t?e.set("framework",t):a&&e.set("category",a);const o=e.toString(),c=o?`${window.location.pathname}?${o}`:window.location.pathname;window.location.search!==(o?`?${o}`:"")&&history.pushState({},"",c)},[a,t]);const V=n.useMemo(()=>{v(!0);const e={},o=x.toLowerCase(),c=x||k;return!a&&!c?(v(!1),{}):(a&&!c?J[a]&&(e[a]=JSON.parse(JSON.stringify(J[a]))):(D.forEach(s=>{const r=s.category,d=s.subcategory,m=s.name,b=!a||r===a,f=m.toLowerCase().includes(o)||s.id_kerangka&&s.id_kerangka.toLowerCase().includes(o)||s.nama_kerangka&&s.nama_kerangka.toLowerCase().includes(o)||s.description.toLowerCase().includes(o),_=!k||s.toolType===k;b&&f&&_&&(e[r]||(e[r]={}),e[r][d]||(e[r][d]={}),e[r][d][m]=s)}),Object.keys(e).forEach(s=>{e[s]&&(Object.keys(e[s]).forEach(r=>{Object.keys(e[s][r]).length===0&&delete e[s][r]}),Object.keys(e[s]).length===0&&delete e[s])})),v(!1),e)},[x,k,a,D]);n.useEffect(()=>{const e={};(x||k)&&Object.values(V).forEach(c=>{Object.keys(c).forEach(s=>{e[s]=!0})}),A(e)},[V,x,k,a]);const U=e=>{const o=e.target.value;O(o),l(null),F({})},W=e=>{T(e.target.value),O(""),C(""),l(null),F({})},y=e=>{F(o=>({...o,[e]:!o[e]}))},q=()=>{l(null),S(null),O(""),C(""),T("")},B=n.useMemo(()=>t?R(t):null,[t,R]);return{selectedCategory:a,setSelectedCategory:l,selectedFramework:t,setSelectedFramework:S,openSubcategories:L,manualOpenSubcategories:Q,searchQuery:P,debouncedSearchQuery:x,toolTypeFilter:k,handleToolTypeFilterChange:W,filteredFrameworks:V,currentFrameworkDetails:B,handleCategorySelect:I,handleFrameworkSelect:$,handleSearchChange:U,handleSubcategoryToggle:y,handleBackToCategories:q,findFrameworkInAllCategories:R,isLoading:j}}const xe=z.lazy(()=>N(()=>import("./NavigationPane-DPEO6fiN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Ee=z.lazy(()=>N(()=>import("./FrameworkPane-cOQ1pWFr.js"),__vite__mapDeps([9,1,3,4,10,11,5,6]))),Fe=z.lazy(()=>N(()=>import("./OutputDisplay-ThmAcuYB.js"),__vite__mapDeps([12,1,10,11,3,4,5,6,13,2,7]))),Pe=z.lazy(()=>N(()=>import("./OnboardingTour-CbNhIEKp.js"),__vite__mapDeps([14,1,3,4]))),De=({showDevMode:h,isApiKeyEnabled:a,apiKey:l,setApiKey:t,showOnboardingTour:S,setShowOnboardingTour:L,handleSavePrompt:A,handleUseAsInput:Q,onShowSavedPrompts:F,promptToLoad:P,onLoadComplete:O,onNavigate:x})=>{const C=i=>{switch(i.type){case"SET_FORM_DATA":d(i.payload.formData),b({});break;case"RESET_FORM":d({}),b({});break}},{selectedCategory:k,setSelectedCategory:T,selectedFramework:j,setSelectedFramework:v,openSubcategories:D,searchQuery:R,debouncedSearchQuery:I,toolTypeFilter:$,handleToolTypeFilterChange:V,filteredFrameworks:U,manualOpenSubcategories:W,currentFrameworkDetails:y,handleCategorySelect:q,handleFrameworkSelect:B,handleSearchChange:e,handleSubcategoryToggle:o,handleBackToCategories:c,isLoading:s}=Oe(C),[r,d]=n.useState({}),[m,b]=n.useState({}),[f,_]=n.useState([{id:`block-${Date.now()}`,type:"text",content:""}]),[te,ae]=n.useState(()=>sessionStorage.getItem("selectedModel")||"gemini-1.5-flash"),[ne,M]=n.useState({}),[ce,se]=n.useState({}),[ue,G]=n.useState([]),[ge,oe]=n.useState(""),[me,H]=n.useState(""),[de,X]=n.useState("");n.useEffect(()=>{if(P){const{versionData:i,parentPrompt:u}=P;T(u.category),v(u.frameworkName),d(i.formData||{}),b(i.customInputs||{}),Array.isArray(i.naturalLanguageOutput)?_(i.naturalLanguageOutput):_([{id:`block-${Date.now()}`,type:"text",content:""}]),O()}},[P,O,T,v]);const re=n.useCallback((i,u,p)=>{d(w=>{const g={...w,[i]:u},Y=ee(i,u,p);return M(Z=>({...Z,[i]:Y})),g})},[d,M]),fe=n.useCallback((i,u,p)=>{b(g=>({...g,[i]:u}));const w=ee(i,u,p);M(g=>({...g,[`${i}-custom`]:w}))},[b,M]),pe=n.useCallback(i=>{se(u=>({...u,[i]:!0}))},[se]),ie=n.useCallback(i=>{ae(i)},[ae]),he=(i,u)=>{const p={};if(!u)return p;const w={...u.components?Object.fromEntries(u.components.map(g=>[g.name,g])):{}};for(const g in w){const Y=w[g],Z=i[g],le=ee(g,Z,Y);le&&(p[g]=le)}return u.crossValidationRules&&u.crossValidationRules.forEach(g=>{i[g.triggerField]===g.triggerValue&&!i[g.dependentField]&&(p[g.dependentField]=g.errorMessage)}),p};return n.useEffect(()=>{if(y&&j){if(y.framework.builder==="visual"){const u=ke(f);H(u);const p=ye(f);G(p),X(JSON.stringify(f,null,2))}else{const u=Se(y.framework,r,m);H(u);const p=_e(y.framework,r,m);G(p);const w=be(y.framework,j,r,m);oe(w),X(w)}const i=he(r,y.framework);M(i)}else G([]),oe(""),H(""),X(""),M({})},[y,j,r,m,f]),E.jsxs(we,{className:"flex-grow-1 g-4 align-items-stretch",children:[E.jsx(K,{xs:12,xl:4,className:"navigation-pane h-100",id:"navigation-pane",children:E.jsx(xe,{selectedCategory:k,searchQuery:R,debouncedSearchQuery:I,filteredFrameworks:U,openSubcategories:D,manualOpenSubcategories:W,handleCategorySelect:q,handleBackToCategories:c,handleFrameworkSelect:B,handleSearchChange:e,handleSubcategoryToggle:o,toolTypeFilter:$,handleToolTypeFilterChange:V,isLoading:s,showInitialMessage:!k&&!I&&!$,showOnboardingTour:S,completeOnboardingTour:()=>L(!1),onNavigate:x})}),E.jsx(K,{xs:12,xl:4,className:"d-flex flex-column h-100",children:E.jsx(Ee,{currentFrameworkDetails:y,selectedFramework:j,formData:r,customInputs:m,promptBlocks:f,onPromptBlocksChange:_,onModelSelect:ie,selectedModel:te,showDevMode:h,isApiKeyEnabled:a,apiKey:l,setApiKey:t,handleInputChangeWithValidation:re,handleCustomInputChangeWithValidation:fe,validationErrors:ne,touchedFields:ce,handleInputBlur:pe})}),E.jsx(K,{xs:12,xl:4,className:"d-flex flex-column h-100",children:E.jsx(Fe,{naturalLanguageOutput:ue,jsonOutput:ge,previewNaturalLanguageOutput:me,previewJsonOutput:de,currentFrameworkDetails:y,formData:r,customInputs:m,selectedFramework:j,selectedCategory:k,onUseAsInput:Q,onShowSavedPrompts:F,showDevMode:h,onSavePrompt:A,apiKey:l,setApiKey:t,selectedModel:te,onModelSelect:ie,handleInputChangeWithValidation:re,validationErrors:ne,isApiKeyEnabled:a,onSelectRecommendedFramework:B})}),E.jsx(Pe,{show:S,onHide:()=>L(!1),onComplete:()=>L(!1)})]})};export{De as default};
