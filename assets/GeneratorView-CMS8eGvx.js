const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/NavigationPane-CWrW5Q-z.js","assets/vendor-C-0K7go2.js","assets/index-B2LomfQR.js","assets/bootstrap-vendor-dK9NTT7j.js","assets/bootstrap-vendor-DBkz-poX.css","assets/toastify-vendor-DMbkEXHT.js","assets/toastify-vendor-VYesxZYF.css","assets/index-ZDlSrE4o.css","assets/categoryUtils-DgX9EYe_.js","assets/FrameworkPane-DhALhsoJ.js","assets/api-B4wmcVc5.js","assets/gemini-vendor-CZZ1HbHH.js","assets/OutputDisplay-t5myL5m3.js","assets/promptGenerators-KF_6FwiQ.js","assets/OnboardingTour-C6MRrOdV.js"])))=>i.map(i=>d[i]);
import{r as n,j as E,a as N,_ as Q}from"./vendor-C-0K7go2.js";import{g as ye,a as be,b as Se,c as _e,d as we}from"./promptGenerators-KF_6FwiQ.js";import{P as z}from"./index-B2LomfQR.js";import{R as xe,a as ee}from"./bootstrap-vendor-dK9NTT7j.js";import"./toastify-vendor-DMbkEXHT.js";const te=(y,a,r)=>{const t=r.validation,w=a===""||a===null||typeof a=="string"&&a.trim()==="";if(r.optional&&w)return"";if(!r.optional&&w)return t&&typeof a=="string"&&t.min_length&&t.min_length>0?`Bidang '${r.label||r.name||y}' membutuhkan minimal ${t.min_length} karakter.`:`Bidang '${r.label||r.name||y}' tidak boleh kosong.`;if(t){if(t.min_length&&typeof a=="string"&&a.length<t.min_length)return`Input ini membutuhkan minimal ${t.min_length} karakter.`;if(t.max_length&&typeof a=="string"&&a.length>t.max_length)return`Bidang '${r.label||r.name||y}' tidak boleh lebih dari ${t.max_length} karakter.`;if(t.regex&&typeof a=="string"&&!new RegExp(t.regex).test(a))return"Format input tidak valid. Mohon periksa kembali.";if(t.min_value&&typeof a=="number"&&a<t.min_value)return`Nilai minimal yang diizinkan adalah ${t.min_value}.`;if(t.max_value&&typeof a=="number"&&a>t.max_value)return`Nilai maksimal yang diizinkan adalah ${t.max_value}.`;if(t.min_date&&new Date(a)<new Date(t.min_date))return`Tanggal untuk bidang '${r.label||r.name||y}' tidak boleh sebelum ${t.min_date}.`;if(t.max_date&&new Date(a)>new Date(t.max_date))return`Tanggal untuk bidang '${r.label||r.name||y}' tidak boleh setelah ${t.max_date}.`}return""};function Oe(y){const[a,r]=n.useState(null),[t,w]=n.useState(null),[A,V]=n.useState({}),[U,F]=n.useState({}),[C,x]=n.useState(""),[O,P]=n.useState(""),[b,T]=n.useState(""),[D,R]=n.useState(!1);n.useEffect(()=>{const e=setTimeout(()=>{P(C)},300);return()=>clearTimeout(e)},[C]);const M=n.useMemo(()=>{const e=[];return Object.entries(z).forEach(([s,l])=>{l&&Object.entries(l).forEach(([o,u])=>{u&&Object.entries(u).forEach(([g,m])=>{e.push({...m,category:s,subcategory:o,name:g})})})}),e},[]),j=n.useCallback(e=>{const s=M.find(l=>l.name===e);if(s){const{category:l,subcategory:o,...u}=s;return{framework:u,category:l,subcategory:o}}return null},[M]),B=n.useCallback(e=>{r(e),w(null),x(""),P(""),T(""),V({}),F({})},[]),L=n.useCallback((e,s,l)=>{let o=null;if(s&&l?o={framework:z[s][l][e],category:s,subcategory:l}:o=j(e),!o)return;r(o.category),w(e),x(""),P(""),T(""),F({[o.subcategory]:!0});const u={},g=o.framework.components?.map(m=>[m.name,m])||[];for(const[m,_]of g){const p=_;if(p.type==="select"&&p.options?.length){const h=p.options[0];typeof h=="string"&&(h.startsWith("Pilih")||h.startsWith("Select"))?u[m]=p.options[1]||"":u[m]=h}else u[m]=p.default??""}y({type:"SET_FORM_DATA",payload:{formData:u}})},[y,j]);n.useEffect(()=>{const e=new URLSearchParams(window.location.search),s=e.get("category"),l=e.get("framework");l?L(l):s&&B(s)},[]),n.useEffect(()=>{const e=new URLSearchParams;t?e.set("framework",t):a&&e.set("category",a);const s=e.toString(),l=s?`${window.location.pathname}?${s}`:window.location.pathname;window.location.search!==(s?`?${s}`:"")&&history.pushState({},"",l)},[a,t]);const v=n.useMemo(()=>{R(!0);const e={},s=O.toLowerCase(),l=O||b;return!a&&!l?(R(!1),{}):(a&&!l?z[a]&&(e[a]=JSON.parse(JSON.stringify(z[a]))):(M.forEach(o=>{const u=o.category,g=o.subcategory,m=o.name,_=!a||u===a,p=m.toLowerCase().includes(s)||o.id_kerangka&&o.id_kerangka.toLowerCase().includes(s)||o.nama_kerangka&&o.nama_kerangka.toLowerCase().includes(s)||o.description.toLowerCase().includes(s),h=!b||o.toolType===b;_&&p&&h&&(e[u]||(e[u]={}),e[u][g]||(e[u][g]={}),e[u][g][m]=o)}),Object.keys(e).forEach(o=>{e[o]&&(Object.keys(e[o]).forEach(u=>{Object.keys(e[o][u]).length===0&&delete e[o][u]}),Object.keys(e[o]).length===0&&delete e[o])})),R(!1),e)},[O,b,a,M]);n.useEffect(()=>{const e={};(O||b)&&Object.values(v).forEach(l=>{Object.keys(l).forEach(o=>{e[o]=!0})}),V(e)},[v,O,b,a]);const W=e=>{const s=e.target.value;x(s),r(null),F({})},q=e=>{T(e.target.value),x(""),P(""),r(null),F({})},S=e=>{F(s=>({...s,[e]:!s[e]}))},G=()=>{r(null),w(null),x(""),P(""),T("")},J=n.useMemo(()=>t?j(t):null,[t,j]);return{selectedCategory:a,setSelectedCategory:r,selectedFramework:t,setSelectedFramework:w,openSubcategories:A,manualOpenSubcategories:U,searchQuery:C,debouncedSearchQuery:O,toolTypeFilter:b,handleToolTypeFilterChange:q,filteredFrameworks:v,currentFrameworkDetails:J,handleCategorySelect:B,handleFrameworkSelect:L,handleSearchChange:W,handleSubcategoryToggle:S,handleBackToCategories:G,findFrameworkInAllCategories:j,isLoading:D}}const Ee=N.lazy(()=>Q(()=>import("./NavigationPane-CWrW5Q-z.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Fe=N.lazy(()=>Q(()=>import("./FrameworkPane-DhALhsoJ.js"),__vite__mapDeps([9,1,3,4,10,11,5,6]))),Ce=N.lazy(()=>Q(()=>import("./OutputDisplay-t5myL5m3.js"),__vite__mapDeps([12,1,10,11,3,4,5,6,13,2,7]))),Pe=N.lazy(()=>Q(()=>import("./OnboardingTour-C6MRrOdV.js"),__vite__mapDeps([14,1,3,4]))),ve=({showDevMode:y,isApiKeyEnabled:a,apiKey:r,setApiKey:t,showOnboardingTour:w,setShowOnboardingTour:A,handleSavePrompt:V,handleUseAsInput:U,onShowSavedPrompts:F,promptToLoad:C,onLoadComplete:x,onNavigate:O})=>{const P=c=>{switch(c.type){case"SET_FORM_DATA":m(c.payload.formData),p({});break;case"RESET_FORM":m({}),p({});break}},{selectedCategory:b,setSelectedCategory:T,selectedFramework:D,setSelectedFramework:R,openSubcategories:M,manualOpenSubcategories:j,searchQuery:B,debouncedSearchQuery:L,toolTypeFilter:v,handleToolTypeFilterChange:W,filteredFrameworks:q,currentFrameworkDetails:S,handleCategorySelect:G,handleFrameworkSelect:J,handleSearchChange:e,handleSubcategoryToggle:s,handleBackToCategories:l,isLoading:o}=Oe(P),u=o,[g,m]=n.useState({}),[_,p]=n.useState({}),[h,H]=n.useState([{id:`block-${Date.now()}`,type:"text",content:""}]),[ne,ae]=n.useState(()=>sessionStorage.getItem("selectedModel")||"gemini-3.0-flash"),[oe,I]=n.useState({}),[ue,se]=n.useState({}),[de,re]=n.useState(""),[me,X]=n.useState([]),[ge,Y]=n.useState(""),[fe,Z]=n.useState("");n.useEffect(()=>{if(C){const{parentPrompt:c,versionData:i}=C,{category:f,frameworkName:k}=c||{},{formData:d,customInputs:$}=i||{};f&&T(f),k&&R(k),m(d||{}),p($||{}),i&&Array.isArray(i.naturalLanguageOutput)?H([{id:`block-${Date.now()}`,type:"text",content:""}]):H([{id:`block-${Date.now()}`,type:"text",content:""}]),x()}},[C,x,T,R]);const ie=n.useCallback((c,i,f)=>{m(k=>{const d={...k,[c]:i};let $="";return(typeof i=="string"||typeof i=="number")&&($=te(c,i,f)),I(K=>({...K,[c]:$})),d})},[m,I]),pe=n.useCallback((c,i,f)=>{p(d=>({...d,[c]:i}));const k=te(c,i,f);I(d=>({...d,[`${c}-custom`]:k}))},[p,I]),he=n.useCallback(c=>{se(i=>({...i,[c]:!0}))},[se]),le=n.useCallback(c=>{ae(c)},[ae]),ke=(c,i)=>{const f={};if(!i)return f;const k={...i.components?Object.fromEntries(i.components.map(d=>[d.name,d])):{}};for(const d in k){const $=k[d],K=c[d],ce=te(d,K,$);ce&&(f[d]=ce)}return i.crossValidationRules&&i.crossValidationRules.forEach(d=>{c[d.triggerField]===d.triggerValue&&!c[d.dependentField]&&(f[d.dependentField]=d.errorMessage)}),f};return n.useEffect(()=>{if(S&&D){if(S.framework.builder==="visual"){const i=ye(h);Y(i);const f=be(h);X(f),Z(JSON.stringify(h,null,2))}else{const i=Se(S.framework,g,_);Y(i);const f=_e(S.framework,g,_);X(f);const k=we(S.framework,D,g,_);re(k),Z(k)}const c=ke(g,S.framework);I(c)}else X([]),re(""),Y(""),Z(""),I({})},[S,D,g,_,h]),E.jsxs(xe,{className:"flex-grow-1 g-4 align-items-stretch",children:[E.jsx(ee,{xs:12,xl:4,className:"navigation-pane h-100",id:"navigation-pane",children:E.jsx(Ee,{selectedCategory:b,searchQuery:B,debouncedSearchQuery:L,filteredFrameworks:q,openSubcategories:M,manualOpenSubcategories:j,handleCategorySelect:G,handleBackToCategories:l,handleFrameworkSelect:J,handleSearchChange:e,handleSubcategoryToggle:s,toolTypeFilter:v,handleToolTypeFilterChange:W,isLoading:u,showInitialMessage:!b&&!L&&!v,onNavigate:O})}),E.jsx(ee,{xs:12,xl:4,className:"d-flex flex-column h-100",children:E.jsx(Fe,{currentFrameworkDetails:S,selectedFramework:D,formData:g,customInputs:_,promptBlocks:h,onPromptBlocksChange:H,onModelSelect:le,selectedModel:ne,showDevMode:y,apiKey:r,setApiKey:t,handleInputChangeWithValidation:ie,handleCustomInputChangeWithValidation:pe,validationErrors:oe,touchedFields:ue,handleInputBlur:he})}),E.jsx(ee,{xs:12,xl:4,className:"d-flex flex-column h-100",children:E.jsx(Ce,{naturalLanguageOutput:me,jsonOutput:de,previewNaturalLanguageOutput:ge,previewJsonOutput:fe,currentFrameworkDetails:S,formData:g,customInputs:_,selectedFramework:D,selectedCategory:b,onUseAsInput:U,onShowSavedPrompts:F,showDevMode:y,onSavePrompt:V,apiKey:r,setApiKey:t,selectedModel:ne,onModelSelect:le,isApiKeyEnabled:a,handleInputChangeWithValidation:ie,validationErrors:oe,onSelectRecommendedFramework:J})}),E.jsx(Pe,{show:w,onHide:()=>A(!1),onComplete:()=>A(!1)})]})};export{ve as default};
